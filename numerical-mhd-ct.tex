\subsection{MHD: Constrained transport}
\label{sec.num.mhd-ct}
\def\Bvec{{\bf B}}
\def\Bf{Bf}
\def\Bc{Bc}
\def\Evec{{\bf E}}
\def\Divb{\ensuremath{\nabla \cdot \Bvec}}

Physically, the divergence of the magnetic field, \Divb, is
identically zero due to the fact that the evolution of the magnetic field is the
curl of a vector, and the divergence of the curl of a vector is identically
zero:
\begin{eqnarray}
\partial \Bvec/\partial t & =& \frac{1}{a} \nabla \times \Evec\\
\Divb & =& 0.
\end{eqnarray}

The Constrained Transport (CT) method \citep{Evans88, Balsara99} for
magnetohydrodynamic (MHD) evolution employs this same vector property
to evolve the magnetic field in a manner that preserves $\Divb=0$ to
to limits of machine precision.  The electric field is computed using
the fluxes from the Riemann solver.  The curl of that electric field
is then used to update the magnetic field.  The advantage of this
method is that it preserves \Divb\ to machine precision.  The drawback
is twofold: increased algorithm complexity, as will be described in
this section; and since only the update of the magnetic field is
divergence free, any monopoles created by other numerical sources
persist.

Enzo MHD-CT has been described in great detail in \citet{Collins10},
and we direct the interested reader to that reference.  The base
Godunov method, described in \citet{Li08a}, uses spatially and
temporally second order reconstruction (both MUSCL-Hancock and
Piecewise Linear Method), a selection of Riemann solvers including
HLLC and HLLD \citep{Mignone07}.  The constrainted transport methods
are the first-order method described by \citet{Balsara99} and the
second order methods described in \citet{Gardiner05}.  The AMR
machinery is described by \citet{Balsara01} and \citet{Collins10}.

The increased complexity of the constrained transport scheme comes in
the form of area-averaged face and length-averaged edge-centered
variables, while the rest of Enzo employs predominantly
volume-averaged cell centered variables.  The magnetic field is
represented by both a face centered field, B$_f$, and a cell centered
field, B$_c$.  The electric field is edge centered.  The magnetic
field is updated in four steps: first, the Riemann problem is solved
in the traditional manner, using the cell centered field; second, an
edge-centered electric field is computed using the fluxes from the
Riemann solver; third, the curl of that electric field is used to
update the face centered field; finally, the cell centered magnetic
field is updated with an average of the face centered field.

Divergence-free AMR is somewhat more complex than the AMR employed elsewhere in
Enzo.  First, the interpolation must be constrained to be divergence free.
Thus, all three face-centered field components are interpolated in concert.
Second, any magnetic field information from previous time steps must be included
in the interpolation, making the interpolation more complex than the simple
parent-child relation used for other fields.  Third, the flux correction
involves more possible grid relations than traditional AMR.  In order to
circumvent this last complexity, the electric field is projected from fine grids
to parent grids (rather than the magnetic field), and is then used to re-update
the parent magnetic field.  This is described in detail in
\citet{Balsara99} and \citet{Collins10}.

Enzo's MHD-CT has been used in a variety of contexts, from galaxy cluster
evolution \citep{Xu11,Xu12}, synthetic observations of radio halos
\citep{Skillman13},  primordial star formation \citep{Xu08}, and
present-day star formation \citep{Collins11,Collins12}.  

